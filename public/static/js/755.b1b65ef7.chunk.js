"use strict";(self.webpackChunkabokisub_recovered=self.webpackChunkabokisub_recovered||[]).push([[755],{50467(e,t,i){i.d(t,{A:()=>c});var n=i(80045),r=i(89379),a=i(34535),o=i(90310),l=i(70579);const s=["color","variant","children"],d=(0,a.Ay)("span")(e=>{let{theme:t,ownerState:i}=e;const n="light"===t.palette.mode,{color:a,variant:l}=i;return(0,r.A)({height:22,minWidth:22,lineHeight:0,borderRadius:8,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:t.spacing(0,1),color:t.palette.grey[800],fontSize:t.typography.pxToRem(12),fontFamily:t.typography.fontFamily,backgroundColor:t.palette.grey[300],fontWeight:t.typography.fontWeightBold},"default"!==a?(0,r.A)((0,r.A)((0,r.A)({},"filled"===l&&(0,r.A)({},(e=>({color:t.palette[e].contrastText,backgroundColor:t.palette[e].main}))(a))),"outlined"===l&&(0,r.A)({},(e=>({color:t.palette[e].main,backgroundColor:"transparent",border:"1px solid ".concat(t.palette[e].main)}))(a))),"ghost"===l&&(0,r.A)({},(e=>({color:t.palette[e][n?"dark":"light"],backgroundColor:(0,o.X4)(t.palette[e].main,.16)}))(a))):(0,r.A)((0,r.A)({},"outlined"===l&&{backgroundColor:"transparent",color:t.palette.text.primary,border:"1px solid ".concat(t.palette.grey[50032])}),"ghost"===l&&{color:n?t.palette.text.secondary:t.palette.common.white,backgroundColor:t.palette.grey[50016]}))});function c(e){let{color:t="default",variant:i="ghost",children:a}=e,o=(0,n.A)(e,s);return(0,l.jsx)(d,(0,r.A)((0,r.A)({ownerState:{color:t,variant:i}},o),{},{children:a}))}},50755(e,t,i){i.r(t),i.d(t,{default:()=>Z});var n=i(65043),r=i(46987),a=i(69525),o=i(67457),l=i(26240),s=i(19252),d=i(12110),c=i(8939),u=i(24056),h=i(39336),p=i(79650),x=i(71806),A=i(73460),g=i(28076),v=i(10039),j=i(51962),m=i(96446),y=i(81045),f=i(85865),b=i(88911),w=i(77739),C=i(17392),_=i(4598),S=i(19090),k=i(90035),D=i(4219),R=i(35316),M=i(63336),N=i(29347),I=i(78977),T=i(81637),K=i(73023),W=i.n(K),Y=i(74605),P=i(48407),B=i(11737),L=i(19838),F=i(50467),z=i(26776),U=i(90797),O=i(12670),E=i(24753),H=i(78868),V=i(84473),J=i(93488),q=i(70579);const Q=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=J.ye.replace("/api","");return"".concat(t,"/storage/").concat(e)},X=[{id:"name",label:"User",alignRight:!1},{id:"user_type",label:"Type",alignRight:!1},{id:"id_type",label:"ID Type",alignRight:!1},{id:"id_number",label:"ID Number",alignRight:!1},{id:"provider",label:"Provider",alignRight:!1},{id:"created_at",label:"Submitted At",alignRight:!1},{id:"status",label:"Status",alignRight:!1},{id:"action",label:"Action",alignRight:!0}],G=[{value:"ALL",label:"ALL"},{value:"pending",label:"Pending"},{value:"verified",label:"Verified"},{value:"rejected",label:"Rejected"}];function Z(){const e=(0,l.A)(),{themeStretch:t}=(0,B.A)(),[i,K]=(0,n.useState)([]),[J,Z]=(0,n.useState)(0),[$,ee]=(0,n.useState)(!0),[te,ie]=(0,n.useState)(0),[ne,re]=(0,n.useState)(""),[ae,oe]=(0,n.useState)(5),[le,se]=(0,n.useState)(!1),[de,ce]=(0,n.useState)("ALL"),{enqueueSnackbar:ue}=(0,r.dh)(),he=window.localStorage.getItem("accessToken");(0,n.useEffect)(()=>{pe(J,ae,de,ne)},[]);const pe=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const r=e+1;ee(!0);try{var a,o,l,s;const d=await V.A.get("/api/system/all/user/kyc/records/".concat(he,"/secure?page=").concat(r,"&habukhan=").concat(t,"&status=").concat(i,"&search=").concat(n));K((null===(a=d.data)||void 0===a||null===(o=a.all_kyc)||void 0===o?void 0:o.data)||[]),ie((null===(l=d.data)||void 0===l||null===(s=l.all_kyc)||void 0===s?void 0:s.total)||0),ee(!1),Z(e)}catch(d){ee(!1),K([]),ue("Failed to fetch KYC records",{variant:"error"})}},xe=0===i.length&&!$,[Ae,ge]=(0,n.useState)(!1),[ve,je]=(0,n.useState)(null),me=()=>{ge(!1),je(null)};return(0,q.jsxs)(L.A,{title:"User: KYC Management",children:[(0,q.jsxs)(s.A,{maxWidth:!t&&"lg",children:[(0,q.jsx)(E.A,{heading:"User KYC Management",links:[{name:"Dashboard",href:P.mB.root},{name:"Users",href:P.mB.user.all_user},{name:"KYC Management"}]}),(0,q.jsxs)(d.A,{children:[(0,q.jsx)(c.A,{value:de,scrollButtons:"auto",variant:"scrollable",allowScrollButtonsMobile:!0,onChange:(e,t)=>{ce(t),pe(0,ae,t,ne),Z(0)},children:G.map(e=>(0,q.jsx)(u.A,{disableRipple:!0,label:(0,o.De)(e.label),value:e.value},e.value))}),(0,q.jsx)(h.A,{}),(0,q.jsx)(H.Hz,{numSelected:0,filterName:ne,onFilterName:e=>{re(e),Z(0),pe(0,ae,de,e)}}),(0,q.jsx)(U.A,{children:(0,q.jsx)(p.A,{sx:{minWidth:800},children:(0,q.jsxs)(x.A,{size:le?"small":"medium",children:[(0,q.jsx)(H.K2,{headLabel:X,rowCount:i.length,numSelected:0}),$?(0,q.jsx)(A.A,{children:(0,q.jsx)(g.A,{children:(0,q.jsx)(v.A,{align:"center",colSpan:8,sx:{py:3},children:(0,q.jsx)(f.A,{variant:"body2",children:"Loading ..."})})})}):(0,q.jsx)(A.A,{children:i.map(t=>{const{id:i,name:n,username:r,display_user:l,user_type:s,profile_image:d,id_type:c,id_number:u,provider:h,status:p,created_at:x,address:A,id_card_path:_,utility_bill_path:S}=t;return(0,q.jsxs)(g.A,{hover:!0,tabIndex:-1,children:[(0,q.jsx)(v.A,{padding:"checkbox",children:(0,q.jsx)(j.A,{})}),(0,q.jsx)(v.A,{align:"left",sx:{minWidth:160},children:(0,q.jsxs)(m.A,{sx:{display:"flex",alignItems:"center"},children:[(0,q.jsx)(y.A,{alt:r,src:d,sx:{mr:2}}),(0,q.jsxs)(f.A,{variant:"subtitle2",noWrap:!0,children:["@",r]})]})}),(0,q.jsx)(v.A,{align:"left",children:(0,q.jsx)(F.A,{color:"info",variant:"outline",children:(0,o.o3)(s||"User")})}),(0,q.jsx)(v.A,{align:"left",children:c}),(0,q.jsx)(v.A,{align:"left",children:u}),(0,q.jsx)(v.A,{align:"left",children:h}),(0,q.jsx)(v.A,{align:"left",children:x&&(0,a.A)(new Date(x),"dd MMM yyyy p")}),(0,q.jsx)(v.A,{align:"left",children:(0,q.jsx)(F.A,{variant:"light"===e.palette.mode?"ghost":"filled",color:("verified"===p?"success":"pending"===p&&"warning")||"error",children:(0,o.o3)(p)})}),(0,q.jsx)(v.A,{align:"right",children:(0,q.jsxs)(b.A,{direction:"row",spacing:.5,justifyContent:"flex-end",children:[(0,q.jsx)(w.A,{title:"View Details",children:(0,q.jsx)(C.A,{color:"primary",onClick:()=>(je(t),void ge(!0)),children:(0,q.jsx)(z.A,{icon:"eva:eye-fill"})})}),"pending"===p&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(w.A,{title:"Approve",children:(0,q.jsx)(C.A,{color:"success",onClick:()=>{return e=i,void W()({title:"Confirm Approval",text:"Are you sure you want to approve this KYC submission?",icon:"warning",buttons:!0,dangerMode:!1}).then(t=>{t&&V.A.post("/api/system/admin/kyc/approve/".concat(he,"/secure"),{kyc_id:e}).then(e=>{ue(e.data.message),pe(J,ae,de,ne)}).catch(e=>{ue(e.message||"Error approving KYC",{variant:"error"})})});var e},children:(0,q.jsx)(z.A,{icon:"eva:checkmark-circle-2-fill"})})}),(0,q.jsx)(w.A,{title:"Reject",children:(0,q.jsx)(C.A,{color:"error",onClick:()=>{return e=i,void W()({title:"Confirm Rejection",text:"Are you sure you want to reject this KYC submission?",icon:"error",buttons:!0,dangerMode:!0}).then(t=>{t&&V.A.post("/api/system/admin/kyc/reject/".concat(he,"/secure"),{kyc_id:e}).then(e=>{ue(e.data.message),pe(J,ae,de,ne)}).catch(e=>{ue(e.message||"Error rejecting KYC",{variant:"error"})})});var e},children:(0,q.jsx)(z.A,{icon:"eva:close-circle-fill"})})})]}),(0,q.jsx)(w.A,{title:"Delete Record",children:(0,q.jsx)(C.A,{color:"error",onClick:()=>(async e=>{W()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this KYC record!",icon:"warning",buttons:!0,dangerMode:!0}).then(async t=>{if(t){ee(!0);try{const t=await V.A.post("/api/system/admin/kyc/delete/".concat(he,"/secure"),{kyc_id:e});"success"===t.data.status?(ue(t.data.message,{variant:"success"}),pe(J,ae,de,ne)):ue(t.data.message,{variant:"error"})}catch(i){ue("Error deleting KYC",{variant:"error"})}ee(!1)}})})(i),children:(0,q.jsx)(z.A,{icon:"eva:trash-2-outline"})})})]})})]},i)})}),xe&&(0,q.jsx)(A.A,{children:(0,q.jsx)(g.A,{children:(0,q.jsx)(v.A,{align:"center",colSpan:8,sx:{py:3},children:(0,q.jsx)(O.A,{searchQuery:ne})})})})]})})}),(0,q.jsx)(Y.A,{control:(0,q.jsx)(_.A,{checked:le,onChange:e=>se(e.target.checked)}),label:"Dense padding",sx:{pl:2}}),(0,q.jsx)(S.A,{rowsPerPageOptions:[5,10,25,100],component:"div",count:te,rowsPerPage:ae,page:J,onPageChange:(e,t)=>pe(t,ae,de,ne),onRowsPerPageChange:e=>{const t=parseInt(e.target.value,10);oe(t),Z(0),pe(0,t,de,ne)}})]})]}),(0,q.jsxs)(k.A,{open:Ae,onClose:me,fullWidth:!0,maxWidth:"sm",children:[(0,q.jsxs)(D.A,{children:["KYC Details - @",null===ve||void 0===ve?void 0:ve.username]}),(0,q.jsxs)(R.A,{dividers:!0,children:[(0,q.jsxs)(b.A,{spacing:2,alignItems:"center",sx:{mb:3},children:[(0,q.jsx)(y.A,{alt:null===ve||void 0===ve?void 0:ve.username,src:null===ve||void 0===ve?void 0:ve.profile_image,sx:{width:80,height:80,mb:1}}),(0,q.jsxs)(f.A,{variant:"h6",children:["@",null===ve||void 0===ve?void 0:ve.username]})]}),(0,q.jsxs)(b.A,{spacing:2,children:[(0,q.jsxs)(m.A,{display:"flex",justifyContent:"space-between",children:[(0,q.jsx)(f.A,{variant:"overline",children:"Status"}),(0,q.jsx)(F.A,{color:("pending"===(null===ve||void 0===ve?void 0:ve.status)?"warning":"rejected"===(null===ve||void 0===ve?void 0:ve.status)&&"error")||"success",children:null===ve||void 0===ve?void 0:ve.status})]}),(0,q.jsxs)(m.A,{display:"flex",justifyContent:"space-between",children:[(0,q.jsx)(f.A,{variant:"overline",children:"ID Type"}),(0,q.jsx)(f.A,{variant:"body2",sx:{textTransform:"uppercase"},children:null===ve||void 0===ve?void 0:ve.id_type})]}),(0,q.jsxs)(m.A,{display:"flex",justifyContent:"space-between",children:[(0,q.jsx)(f.A,{variant:"overline",children:"ID Number"}),(0,q.jsx)(f.A,{variant:"body2",children:null===ve||void 0===ve?void 0:ve.id_number})]}),(0,q.jsxs)(m.A,{display:"flex",justifyContent:"space-between",children:[(0,q.jsx)(f.A,{variant:"overline",children:"Provider"}),(0,q.jsx)(f.A,{variant:"body2",sx:{textTransform:"capitalize"},children:null===ve||void 0===ve?void 0:ve.provider})]}),(0,q.jsxs)(m.A,{display:"flex",justifyContent:"space-between",children:[(0,q.jsx)(f.A,{variant:"overline",children:"Date Submitted"}),(0,q.jsx)(f.A,{variant:"body2",children:(null===ve||void 0===ve?void 0:ve.created_at)&&(0,a.A)(new Date(ve.created_at),"dd MMM yyyy p")})]}),(0,q.jsxs)(m.A,{display:"flex",justifyContent:"space-between",children:[(0,q.jsx)(f.A,{variant:"overline",children:"Address"}),(0,q.jsx)(f.A,{variant:"body2",sx:{textAlign:"right",maxWidth:"70%"},children:(null===ve||void 0===ve?void 0:ve.address)||"N/A"})]}),(0,q.jsx)(h.A,{sx:{my:1}}),(0,q.jsx)(f.A,{variant:"overline",children:"Documents"}),(0,q.jsxs)(b.A,{direction:"row",spacing:2,children:[(null===ve||void 0===ve?void 0:ve.id_card_path)&&(0,q.jsxs)(m.A,{flex:1,children:[(0,q.jsx)(f.A,{variant:"caption",display:"block",gutterBottom:!0,children:"I.D. Card"}),(0,q.jsx)(M.A,{component:"img",src:Q(ve.id_card_path),sx:{width:"100%",height:120,objectFit:"cover",cursor:"pointer",borderRadius:1,border:"1px solid",borderColor:"divider"},onClick:()=>window.open(Q(ve.id_card_path),"_blank")})]}),(null===ve||void 0===ve?void 0:ve.utility_bill_path)&&(0,q.jsxs)(m.A,{flex:1,children:[(0,q.jsx)(f.A,{variant:"caption",display:"block",gutterBottom:!0,children:"Utility Bill"}),(0,q.jsx)(M.A,{component:"img",src:Q(ve.utility_bill_path),sx:{width:"100%",height:120,objectFit:"cover",cursor:"pointer",borderRadius:1,border:"1px solid",borderColor:"divider"},onClick:()=>window.open(Q(ve.utility_bill_path),"_blank")})]})]}),(null===ve||void 0===ve?void 0:ve.full_response_json)&&(0,q.jsxs)(m.A,{sx:{mt:2},children:[(0,q.jsx)(f.A,{variant:"overline",children:"Raw Verification Data"}),(0,q.jsx)(M.A,{sx:{p:1.5,bgcolor:"background.neutral",mt:.5,maxHeight:200,overflow:"auto"},children:(0,q.jsx)("pre",{style:{margin:0,fontSize:"11px",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:(()=>{try{const e="string"===typeof ve.full_response_json?JSON.parse(ve.full_response_json):ve.full_response_json;return JSON.stringify(e,null,2)}catch(e){return String(ve.full_response_json)}})()})})]})]})]}),(0,q.jsx)(N.A,{children:(0,q.jsx)(I.A,{onClick:me,children:"Close"})})]}),$&&(0,q.jsx)(m.A,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(255, 255, 255, 0.7)",display:"flex",zIndex:9999,justifyContent:"center",alignItems:"center"},children:(0,q.jsx)(T.A,{})})]})}},29347(e,t,i){i.d(t,{A:()=>g});var n=i(98587),r=i(58168),a=i(65043),o=i(58387),l=i(98610),s=i(34535),d=i(98206),c=i(92532),u=i(72372);function h(e){return(0,u.Ay)("MuiDialogActions",e)}(0,c.A)("MuiDialogActions",["root","spacing"]);var p=i(70579);const x=["className","disableSpacing"],A=(0,s.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.disableSpacing&&t.spacing]}})(e=>{let{ownerState:t}=e;return(0,r.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})}),g=a.forwardRef(function(e,t){const i=(0,d.b)({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:s=!1}=i,c=(0,n.A)(i,x),u=(0,r.A)({},i,{disableSpacing:s}),g=(e=>{const{classes:t,disableSpacing:i}=e,n={root:["root",!i&&"spacing"]};return(0,l.A)(n,h,t)})(u);return(0,p.jsx)(A,(0,r.A)({className:(0,o.A)(g.root,a),ownerState:u,ref:t},c))})},35316(e,t,i){i.d(t,{A:()=>v});var n=i(98587),r=i(58168),a=i(65043),o=i(58387),l=i(98610),s=i(34535),d=i(98206),c=i(92532),u=i(72372);function h(e){return(0,u.Ay)("MuiDialogContent",e)}(0,c.A)("MuiDialogContent",["root","dividers"]);var p=i(87034),x=i(70579);const A=["className","dividers"],g=(0,s.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.dividers&&t.dividers]}})(e=>{let{theme:t,ownerState:i}=e;return(0,r.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},i.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}:{[".".concat(p.A.root," + &")]:{paddingTop:0}})}),v=a.forwardRef(function(e,t){const i=(0,d.b)({props:e,name:"MuiDialogContent"}),{className:a,dividers:s=!1}=i,c=(0,n.A)(i,A),u=(0,r.A)({},i,{dividers:s}),p=(e=>{const{classes:t,dividers:i}=e,n={root:["root",i&&"dividers"]};return(0,l.A)(n,h,t)})(u);return(0,x.jsx)(g,(0,r.A)({className:(0,o.A)(p.root,a),ownerState:u,ref:t},c))})},4219(e,t,i){i.d(t,{A:()=>g});var n=i(58168),r=i(98587),a=i(65043),o=i(58387),l=i(98610),s=i(85865),d=i(34535),c=i(98206),u=i(87034),h=i(2563),p=i(70579);const x=["className","id"],A=(0,d.Ay)(s.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),g=a.forwardRef(function(e,t){const i=(0,c.b)({props:e,name:"MuiDialogTitle"}),{className:s,id:d}=i,g=(0,r.A)(i,x),v=i,j=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},u.t,t)})(v),{titleId:m=d}=a.useContext(h.A);return(0,p.jsx)(A,(0,n.A)({component:"h2",className:(0,o.A)(j.root,s),ownerState:v,ref:t,variant:"h6",id:null!=d?d:m},g))})},87034(e,t,i){i.d(t,{A:()=>o,t:()=>a});var n=i(92532),r=i(72372);function a(e){return(0,r.Ay)("MuiDialogTitle",e)}const o=(0,n.A)("MuiDialogTitle",["root"])}}]);
//# sourceMappingURL=755.b1b65ef7.chunk.js.map