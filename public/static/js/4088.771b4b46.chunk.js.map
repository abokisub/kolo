{"version":3,"file":"static/js/4088.771b4b46.chunk.js","mappings":"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","sources":["pages/auth/VerifyCode.js","sections/auth/verify-code/VerifyCodeForm.js"],"sourcesContent":["import { Link as RouterLink } from 'react-router-dom';\r\nimport swal from 'sweetalert';\r\n// @mui\r\nimport { styled } from '@mui/material/styles';\r\nimport { Box, Button, Link, Container, Typography } from '@mui/material';\r\n// layouts\r\nimport LogoOnlyLayout from '../../layouts/LogoOnlyLayout';\r\n// routes\r\nimport { PATH_AUTH } from '../../routes/paths';\r\n// components\r\nimport Page from '../../components/Page';\r\nimport Iconify from '../../components/Iconify';\r\n// sections\r\nimport { VerifyCodeForm } from '../../sections/auth/verify-code';\r\nimport axios from '../../utils/axios';\r\n// hooks\r\nimport useAuth from '../../hooks/useAuth';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\n\r\nconst RootStyle = styled('div')(({ theme }) => ({\r\n  display: 'flex',\r\n  height: '100%',\r\n  alignItems: 'center',\r\n  padding: theme.spacing(12, 0),\r\n}));\r\n\r\n// ----------------------------------------------------------------------\r\nfunction Resend (email){\r\n  swal({\r\n    title: \"Note\",\r\n    text: \"Do You Want A New OTP?\",\r\n    icon: \"info\",\r\n    button: {\r\n      text: \"Proceed\",\r\n      closeModal: false,\r\n    },\r\n    dangerMode: true,\r\n  }) .then((willDelete) => {\r\n    if (willDelete) {\r\n  axios.get(`/api/user/resend/${email}/otp`,{\r\n}).then(resp => {\r\n    swal(resp.data.message);\r\n}).catch(error => {\r\n    if(error.message === ''){\r\n      swal('Opps!','An Error Occured','error');\r\n    }else{\r\n    swal(\"Opps!\", error.message, \"error\");\r\n    }\r\n});\r\n} else {\r\n  swal(\"Request Cancelled\");\r\n}\r\n});\r\n}\r\nexport default function VerifyCode() {\r\n  const { user } = useAuth()\r\n  return (\r\n    <Page title=\"Verify\">\r\n      <RootStyle>\r\n        <LogoOnlyLayout />\r\n        <Container>\r\n          <Box sx={{ maxWidth: 480, mx: 'auto' }}>\r\n            <Button\r\n              size=\"small\"\r\n              component={RouterLink}\r\n              to={PATH_AUTH.login}\r\n              startIcon={<Iconify icon={'eva:arrow-ios-back-fill'} width={20} height={20} />}\r\n              sx={{ mb: 3 }}\r\n            >\r\n              Back\r\n            </Button>\r\n\r\n            <Typography variant=\"h3\" paragraph>\r\n              Please check your email!\r\n            </Typography>\r\n            <Typography sx={{ color: 'text.secondary' }}>\r\n              We have emailed a 6-digit confirmation code to {user?.email} (spam folder), or  {user?.phone} please enter the code in below box to verify\r\n              your email.\r\n            </Typography>\r\n\r\n            <Box sx={{ mt: 5, mb: 3 }}>\r\n              <VerifyCodeForm />\r\n            </Box>\r\n\r\n            <Typography variant=\"body2\" align=\"center\">\r\n              Donâ€™t have a code? &nbsp;\r\n              <Link variant=\"subtitle2\" underline=\"none\" onClick={() => {Resend(user?.email)}}>\r\n                Resend code\r\n              </Link>\r\n            </Typography>\r\n          </Box>\r\n        </Container>\r\n      </RootStyle>\r\n    </Page>\r\n  );\r\n}\r\n","import * as Yup from 'yup';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useEffect } from 'react';\r\n// form\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\n// @mui\r\nimport { OutlinedInput, Stack, Alert } from '@mui/material';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport useIsMountedRef from '../../../hooks/useIsMountedRef';\r\n// routes\r\n\r\n\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport default function VerifyCodeForm() {\r\n  const { verify, user } = useAuth();\r\n   const { enqueueSnackbar } = useSnackbar();\r\n  const isMountedRef = useIsMountedRef();\r\n\r\n\r\n\r\n  const VerifyCodeSchema = Yup.object().shape({\r\n    code1: Yup.string().required('Code is required'),\r\n    code2: Yup.string().required('Code is required'),\r\n    code3: Yup.string().required('Code is required'),\r\n    code4: Yup.string().required('Code is required'),\r\n    code5: Yup.string().required('Code is required'),\r\n    code6: Yup.string().required('Code is required'),\r\n  });\r\n\r\n  const defaultValues = {\r\n    code1: '',\r\n    code2: '',\r\n    code3: '',\r\n    code4: '',\r\n    code5: '',\r\n    code6: '',\r\n  };\r\n\r\n  const {\r\n    watch,\r\n    control,\r\n    setValue,\r\n    handleSubmit,\r\n    setError,\r\n    formState: {errors, isSubmitting, isValid },\r\n  } = useForm({\r\n    mode: 'onBlur',\r\n    defaultValues,\r\n    resolver: yupResolver(VerifyCodeSchema),\r\n  });\r\n\r\n  const values = watch();\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('paste', handlePasteClipboard);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n \r\n\r\n  const onSubmit = async (data) => {\r\n   \r\n    \r\n    const key =  Object.values(data).join('');\r\n    try {\r\n      await  verify(key,user.email);\r\n       enqueueSnackbar('Account Verified');\r\n    } catch (error) {\r\n      if (isMountedRef.current){\r\n        setError('afterSubmit', error);\r\n        \r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePasteClipboard = (event) => {\r\n    let data = event?.clipboardData?.getData('Text') || '';\r\n\r\n    data = data.split('');\r\n\r\n    [].forEach.call(document.querySelectorAll('#field-code'), (node, index) => {\r\n      node.value = data[index];\r\n      const fieldIndex = `code${index + 1}`;\r\n      setValue(fieldIndex, data[index]);\r\n    });\r\n  };\r\n  const handleChangeWithNextField = (event, handleChange) => {\r\n    const { maxLength, value, name } = event.target;\r\n    const fieldIndex = name.replace('code', '');\r\n\r\n    const fieldIntIndex = Number(fieldIndex);\r\n\r\n    if (value.length >= maxLength) {\r\n      if (fieldIntIndex < 6) {\r\n        const nextfield = document.querySelector(`input[name=code${fieldIntIndex + 1}]`);\r\n        if (nextfield !== null) {\r\n          nextfield.focus();\r\n        }\r\n      }\r\n    }\r\n\r\n    handleChange(event);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)}>\r\n        {!!errors.afterSubmit && <Alert severity=\"error\">{errors.afterSubmit.message}</Alert>}\r\n      <Stack direction=\"row\" spacing={2} justifyContent=\"center\">\r\n        {Object.keys(values).map((name, index) => (\r\n          <Controller\r\n            key={name}\r\n            name={`code${index + 1}`}\r\n            control={control}\r\n            render={({ field }) => (\r\n              <OutlinedInput\r\n                {...field}\r\n                id=\"field-code\"\r\n                autoFocus={index === 0}\r\n                placeholder=\"-\"\r\n                onChange={(event) => handleChangeWithNextField(event, field.onChange)}\r\n                inputProps={{\r\n                  maxLength: 1,\r\n                  sx: {\r\n                    p: 0,\r\n                    textAlign: 'center',\r\n                    width: { xs: 36, sm: 56 },\r\n                    height: { xs: 36, sm: 56 },\r\n                  },\r\n                }}\r\n              />\r\n            )}\r\n          />\r\n        ))}\r\n      </Stack>\r\n\r\n      <LoadingButton\r\n        fullWidth\r\n        size=\"large\"\r\n        type=\"submit\"\r\n        variant=\"contained\"\r\n        loading={isSubmitting}\r\n        disabled={!isValid}\r\n        sx={{ mt: 3 }}\r\n      >\r\n        Verify\r\n      </LoadingButton>\r\n    </form>\r\n  );\r\n}\r\n"],"names":["RootStyle","styled","_ref","theme","display","height","alignItems","padding","spacing","VerifyCode","user","useAuth","_jsx","Page","title","children","_jsxs","LogoOnlyLayout","Container","Box","sx","maxWidth","mx","Button","size","component","RouterLink","to","PATH_AUTH","login","startIcon","Iconify","icon","width","mb","Typography","variant","paragraph","color","email","phone","mt","VerifyCodeForm","align","Link","underline","onClick","swal","text","button","closeModal","dangerMode","then","willDelete","axios","get","concat","resp","data","message","catch","error","verify","enqueueSnackbar","useSnackbar","isMountedRef","useIsMountedRef","VerifyCodeSchema","Yup","shape","code1","required","code2","code3","code4","code5","code6","watch","control","setValue","handleSubmit","setError","formState","errors","isSubmitting","isValid","useForm","mode","defaultValues","resolver","yupResolver","values","useEffect","document","addEventListener","handlePasteClipboard","event","_event$clipboardData","clipboardData","getData","split","forEach","call","querySelectorAll","node","index","value","fieldIndex","onSubmit","async","key","Object","join","current","afterSubmit","Alert","severity","Stack","direction","justifyContent","keys","map","name","Controller","render","field","OutlinedInput","_objectSpread","id","autoFocus","placeholder","onChange","handleChangeWithNextField","handleChange","maxLength","target","replace","fieldIntIndex","Number","length","nextfield","querySelector","focus","inputProps","p","textAlign","xs","sm","LoadingButton","fullWidth","type","loading","disabled"],"sourceRoot":""}